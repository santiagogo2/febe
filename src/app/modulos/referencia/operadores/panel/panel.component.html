<div class="loaderBall" *ngIf="!referalRequest && !responseMessage">
    <div class="ball-pulse-rise">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>
<div class="mt-3 errorAlert alert-danger" *ngIf="responseMessage && !referalRequest">
    <div class="alert" role="alert">
        {{ responseMessage }}
    </div>
</div>

<div class="row" *ngIf="referalRequest">
    <div class="col-sm-12">
        <div class="card border-0">
            <div class="card-body cardContainer">
                <div class="backLink col col-sm-12">
                    <a class="col-sm-12" routerLink="/referencia">Regresar</a>
                </div>
                <div class="col col-12 d-inline-block align-top checkbox text-left mb-2">
                    <input type="checkbox" [(ngModel)]="filters.nuevos" (ngModelChange)="getCasesByFilters()" name="Nuevos" id="Nuevos"><label class="checkbox" for="Nuevos">NUEVOS</label>
                    <input class="ml-3" type="checkbox" [(ngModel)]="filters.aceptados" (ngModelChange)="getCasesByFilters()" name="Aceptados" id="Aceptados"><label class="checkbox" for="Aceptados">ACEPTADOS</label>
                    <input class="ml-3" type="checkbox" [(ngModel)]="filters.cerrados" (ngModelChange)="getCasesByFilters()" name="Cerrados" id="Cerrados"><label class="checkbox" for="Cerrados">CERRADOS</label>
                    <input class="ml-3" type="checkbox" [(ngModel)]="filters.cancelados" (ngModelChange)="getCasesByFilters()" name="Cancelados" id="Cancelados"><label class="checkbox" for="Cancelados">CANCELADOS</label>
                    <small class="invalid-feedback d-block" *ngIf="filterErrorMessage">{{ filterErrorMessage }}</small>
                </div>
                <div class="mt-3 errorAlert alert-danger" *ngIf="responseMessage">
                    <div class="alert" role="alert">
                        {{ responseMessage }}
                    </div>
                </div>

                <div class="tableContainer">
                    <div class="tableContainerAll col col-sm-12">
                        <div class="paginationControls" *ngIf="referalRequest && referalRequest.length > itemsPerPage">
                            <pagination-controls (pageChange)="pageChange($event)" previousLabel="Anterior" nextLabel="Siguiente" maxSize="4">
                            </pagination-controls>
                        </div>

                        <div class="deleteLoader mb-3" *ngIf="preloaderStatus">
                            <div class="loader"></div>
                        </div>
                        <table class="table table-bordered" *ngIf="!preloaderStatus">
                            <thead class="thead_styles">
                                <tr>
                                    <th>Consecutivo</th>
                                    <th>Fecha Creación</th>
                                    <th>Documento</th>
                                    <th>Nombre</th>
                                    <th>Ingreso</th>
                                    <th>Motivo de Traslado</th>
                                    <th>Médico</th>
                                    <th>Estado</th>
                                    <th>Tiempo Transcurrido (min)</th>
                                    <th>Prioridad</th>
                                </tr>
                            </thead>
                            <tbody class="tbody_styles">
                                <tr *ngFor="let referal of referalRequest | paginate: {itemsPerPage: itemsPerPage, currentPage: actualPage}; index as i" class="tableStyles">
                                    <td><a [routerLink]="['../panel/seguimiento/', referal.id]">{{ referal.id }}</a></td>
                                    <td><a [routerLink]="['../panel/seguimiento/', referal.id]">{{ referal.created_at.substr(0,16) }}</a></td>
                                    <td><a [routerLink]="['../panel/seguimiento/', referal.id]">{{ referal.numeroIdentificacion }}</a></td>
                                    <td><a [routerLink]="['../panel/seguimiento/', referal.id]">{{ referal.nombresApellidos }}</a></td>
                                    <td><a [routerLink]="['../panel/seguimiento/', referal.id]">{{ referal.ingreso | isnullfill }}</a></td>
                                    <td><a [routerLink]="['../panel/seguimiento/', referal.id]">{{ referal.motivoTraslado | global: 'motivosTraslados' }}</a></td>
                                    <td><a [routerLink]="['../panel/seguimiento/', referal.id]">{{ referal.nombreMedico | isnullfill }}</a></td>
                                    <td><a [routerLink]="['../panel/seguimiento/', referal.id]">{{ referal.estado | global: 'estadosReferencia' }}</a></td>
                                    <td [ngClass]="{'bad': getDateColor(referal.created_at.substr(0,19), referal.fechaHoraCierre, referal.prioridad) == 'bad', 'regular': getDateColor(referal.created_at.substr(0,19), referal.fechaHoraCierre, referal.prioridad) == 'regular', 'good': getDateColor(referal.created_at.substr(0,19), referal.fechaHoraCierre, referal.prioridad) == 'good'}"><a style="color: #FFF !important;" [routerLink]="['../panel/seguimiento/', referal.id]">{{ referal.timeElapsed }}</a></td>
                                    <td [ngClass]=" { 'bad': referal.prioridad==1 , 'good': referal.prioridad==2 , 'regular': referal.prioridad==3 } ">{{ referal.prioridad | global: 'prioridades' }}</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="paginationControls " *ngIf="referalRequest && referalRequest.length> itemsPerPage">
                            <pagination-controls (pageChange)="pageChange($event)" previousLabel="Anterior" nextLabel="Siguiente" maxSize="4">
                            </pagination-controls>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>